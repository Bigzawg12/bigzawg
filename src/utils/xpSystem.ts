// Time-based achievements (example for 100m)
  {
    id: 'sub-15-100m',
    title: 'Getting Fast',
    description: 'Run 100m in under 15 seconds',
    type: 'time',
    target: 15,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'bronze'
  },
  {
    id: 'sub-12-100m',
    title: 'Sub-12 Sprinter',
    description: 'Run 100m in under 12 seconds',
    type: 'time',
    target: 12,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'silver'
  },
  {
    id: 'sub-11-100m',
    title: 'Elite Sprinter',
    description: 'Run 100m in under 11 seconds',
    type: 'time',
    target: 11,
    icon: 'âš¡',
    rarity: 'gold'
  },
  {
    id: 'sub-10-100m',
    title: 'World Class Speed',
    description: 'Run 100m in under 10 seconds',
    type: 'time',
    target: 10,
    icon: 'ðŸŒŸ',
    rarity: 'platinum'
  },
  
  // 200m achievements
  {
    id: 'sub-30-200m',
    title: '200m Starter',
    description: 'Run 200m in under 30 seconds',
    type: 'time',
    target: 30,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'bronze'
  },
  {
    id: 'sub-25-200m',
    title: '200m Speedster',
    description: 'Run 200m in under 25 seconds',
    type: 'time',
    target: 25,
    icon: 'âš¡',
    rarity: 'silver'
  },
  {
    id: 'sub-22-200m',
    title: '200m Elite',
    description: 'Run 200m in under 22 seconds',
    type: 'time',
    target: 22,
    icon: 'ðŸ”¥',
    rarity: 'gold'
  },
  {
    id: 'sub-20-200m',
    title: '200m World Class',
    description: 'Run 200m in under 20 seconds',
    type: 'time',
    target: 20,
    icon: 'ðŸ‘‘',
    rarity: 'platinum'
  },
  
  // 400m achievements
  {
    id: 'sub-60-400m',
    title: '400m Beginner',
    description: 'Run 400m in under 60 seconds',
    type: 'time',
    target: 60,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'bronze'
  },
  {
    id: 'sub-55-400m',
    title: '400m Competitor',
    description: 'Run 400m in under 55 seconds',
    type: 'time',
    target: 55,
    icon: 'ðŸ’¨',
    rarity: 'silver'
  },
  {
    id: 'sub-50-400m',
    title: '400m Elite',
    description: 'Run 400m in under 50 seconds',
    type: 'time',
    target: 50,
    icon: 'ðŸ”¥',
    rarity: 'gold'
  },
  {
    id: 'sub-45-400m',
    title: '400m World Class',
    description: 'Run 400m in under 45 seconds',
    type: 'time',
    target: 45,
    icon: 'â­',
    rarity: 'platinum'
  },
  
  // 800m achievements
  {
    id: 'sub-150-800m',
    title: '800m Starter',
    description: 'Run 800m in under 2:30',
    type: 'time',
    target: 150,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'bronze'
  },
  {
    id: 'sub-120-800m',
    title: '800m Runner',
    description: 'Run 800m in under 2:00',
    type: 'time',
    target: 120,
    icon: 'ðŸ’ª',
    rarity: 'silver'
  },
  {
    id: 'sub-105-800m',
    title: '800m Elite',
    description: 'Run 800m in under 1:45',
    type: 'time',
    target: 105,
    icon: 'ðŸ”¥',
    rarity: 'gold'
  },
  {
    id: 'sub-100-800m',
    title: '800m World Class',
    description: 'Run 800m in under 1:40',
    type: 'time',
    target: 100,
    icon: 'ðŸ‘‘',
    rarity: 'platinum'
  },
  
  // 1500m achievements
  {
    id: 'sub-360-1500m',
    title: '1500m Beginner',
    description: 'Run 1500m in under 6:00',
    type: 'time',
    target: 360,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'bronze'
  },
  {
    id: 'sub-300-1500m',
    title: '1500m Runner',
    description: 'Run 1500m in under 5:00',
    type: 'time',
    target: 300,
    icon: 'ðŸ’¨',
    rarity: 'silver'
  },
  {
    id: 'sub-240-1500m',
    title: '1500m Elite',
    description: 'Run 1500m in under 4:00',
    type: 'time',
    target: 240,
    icon: 'âš¡',
    rarity: 'gold'
  },
  {
    id: 'sub-210-1500m',
    title: '1500m World Class',
    description: 'Run 1500m in under 3:30',
    type: 'time',
    target: 210,
    icon: 'ðŸŒŸ',
    rarity: 'platinum'
  },
  
  // 3000m achievements
  {
    id: 'sub-720-3000m',
    title: '3000m Starter',
    description: 'Run 3000m in under 12:00',
    type: 'time',
    target: 720,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'bronze'
  },
  {
    id: 'sub-600-3000m',
    title: '3000m Runner',
    description: 'Run 3000m in under 10:00',
    type: 'time',
    target: 600,
    icon: 'ðŸ’ª',
    rarity: 'silver'
  },
  {
    id: 'sub-540-3000m',
    title: '3000m Elite',
    description: 'Run 3000m in under 9:00',
    type: 'time',
    target: 540,
    icon: 'ðŸ”¥',
    rarity: 'gold'
  },
  {
    id: 'sub-480-3000m',
    title: '3000m World Class',
    description: 'Run 3000m in under 8:00',
    type: 'time',
    target: 480,
    icon: 'ðŸ‘‘',
    rarity: 'platinum'
  },
  
  // 5000m achievements
  {
    id: 'sub-1200-5000m',
    title: '5K Finisher',
    description: 'Run 5000m in under 20:00',
    type: 'time',
    target: 1200,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'bronze'
  },
  {
    id: 'sub-1080-5000m',
    title: '5K Runner',
    description: 'Run 5000m in under 18:00',
    type: 'time',
    target: 1080,
    icon: 'ðŸ’¨',
    rarity: 'silver'
  },
  {
    id: 'sub-900-5000m',
    title: '5K Elite',
    description: 'Run 5000m in under 15:00',
    type: 'time',
    target: 900,
    icon: 'âš¡',
    rarity: 'gold'
  },
  {
    id: 'sub-780-5000m',
    title: '5K World Class',
    description: 'Run 5000m in under 13:00',
    type: 'time',
    target: 780,
    icon: 'ðŸŒŸ',
    rarity: 'platinum'
  },
  
  // 10000m achievements
  {
    id: 'sub-2400-10000m',
    title: '10K Finisher',
    description: 'Run 10000m in under 40:00',
    type: 'time',
    target: 2400,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'bronze'
  },
  {
    id: 'sub-2100-10000m',
    title: '10K Runner',
    description: 'Run 10000m in under 35:00',
    type: 'time',
    target: 2100,
    icon: 'ðŸ’ª',
    rarity: 'silver'
  },
  {
    id: 'sub-1800-10000m',
    title: '10K Elite',
    description: 'Run 10000m in under 30:00',
    type: 'time',
    target: 1800,
    icon: 'ðŸ”¥',
    rarity: 'gold'
  },
  {
    id: 'sub-1620-10000m',
    title: '10K World Class',
    description: 'Run 10000m in under 27:00',
    type: 'time',
    target: 1620,
    icon: 'ðŸ‘‘',
    rarity: 'platinum'
  },
  
  // 110m Hurdles achievements
  {
    id: 'sub-20-110h',
    title: 'Hurdler',
    description: 'Run 110m hurdles in under 20 seconds',
    type: 'time',
    target: 20,
    icon: 'ðŸš§',
    rarity: 'bronze'
  },
  {
    id: 'sub-16-110h',
    title: 'Hurdles Competitor',
    description: 'Run 110m hurdles in under 16 seconds',
    type: 'time',
    target: 16,
    icon: 'âš¡',
    rarity: 'silver'
  },
  {
    id: 'sub-14-110h',
    title: 'Elite Hurdler',
    description: 'Run 110m hurdles in under 14 seconds',
    type: 'time',
    target: 14,
    icon: 'ðŸ”¥',
    rarity: 'gold'
  },
  {
    id: 'sub-13-110h',
    title: 'World Class Hurdler',
    description: 'Run 110m hurdles in under 13 seconds',
    type: 'time',
    target: 13,
    icon: 'ðŸ‘‘',
    rarity: 'platinum'
  },
  
  // 400m Hurdles achievements
  {
    id: 'sub-70-400h',
    title: '400H Beginner',
    description: 'Run 400m hurdles in under 70 seconds',
    type: 'time',
    target: 70,
    icon: 'ðŸš§',
    rarity: 'bronze'
  },
  {
    id: 'sub-60-400h',
    title: '400H Competitor',
    description: 'Run 400m hurdles in under 60 seconds',
    type: 'time',
    target: 60,
    icon: 'ðŸ’¨',
    rarity: 'silver'
  },
  {
    id: 'sub-52-400h',
    title: '400H Elite',
    description: 'Run 400m hurdles in under 52 seconds',
    type: 'time',
    target: 52,
    icon: 'âš¡',
    rarity: 'gold'
  },
  {
    id: 'sub-48-400h',
    title: '400H World Class',
    description: 'Run 400m hurdles in under 48 seconds',
    type: 'time',
    target: 48,
    icon: 'ðŸŒŸ',
    rarity: 'platinum'
  },
  
  // Long Jump achievements
  {
    id: 'lj-4m',
    title: 'Long Jump Starter',
    description: 'Jump over 4 meters in long jump',
    type: 'distance',
    target: 4,
    icon: 'ðŸ¦˜',
    rarity: 'bronze'
  },
  {
    id: 'lj-5m',
    title: 'Long Jump Competitor',
    description: 'Jump over 5 meters in long jump',
    type: 'distance',
    target: 5,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'silver'
  },
  {
    id: 'lj-6m',
    title: 'Long Jump Elite',
    description: 'Jump over 6 meters in long jump',
    type: 'distance',
    target: 6,
    icon: 'âš¡',
    rarity: 'gold'
  },
  {
    id: 'lj-7m',
    title: 'Long Jump World Class',
    description: 'Jump over 7 meters in long jump',
    type: 'distance',
    target: 7,
    icon: 'ðŸŒŸ',
    rarity: 'platinum'
  },
  
  // High Jump achievements
  {
    id: 'hj-1.5m',
    title: 'High Jump Starter',
    description: 'Jump over 1.5 meters in high jump',
    type: 'distance',
    target: 1.5,
    icon: 'â¬†ï¸',
    rarity: 'bronze'
  },
  {
    id: 'hj-1.7m',
    title: 'High Jump Competitor',
    description: 'Jump over 1.7 meters in high jump',
    type: 'distance',
    target: 1.7,
    icon: 'ðŸƒâ€â™‚ï¸',
    rarity: 'silver'
  },
  {
    id: 'hj-1.9m',
    title: 'High Jump Elite',
    description: 'Jump over 1.9 meters in high jump',
    type: 'distance',
    target: 1.9,
    icon: 'ðŸ”¥',
    rarity: 'gold'
  },
  {
    id: 'hj-2.1m',
    title: 'High Jump World Class',
    description: 'Jump over 2.1 meters in high jump',
    type: 'distance',
    target: 2.1,
    icon: 'ðŸ‘‘',
    rarity: 'platinum'
  },
  
  // Pole Vault achievements
  {
    id: 'pv-3m',
    title: 'Pole Vault Beginner',
    description: 'Vault over 3 meters in pole vault',
    type: 'distance',
    target: 3,
    icon: 'ðŸ’',
    rarity: 'bronze'
  },
  {
    id: 'pv-4m',
    title: 'Pole Vault Competitor',
    description: 'Vault over 4 meters in pole vault',
    type: 'distance',
    target: 4,
    icon: 'âš¡',
    rarity: 'silver'
  },
  {
    id: 'pv-5m',
    title: 'Pole Vault Elite',
    description: 'Vault over 5 meters in pole vault',
    type: 'distance',
    target: 5,
    icon: 'ðŸ”¥',
    rarity: 'gold'
  },
  {
    id: 'pv-6m',
    title: 'Pole Vault World Class',
    description: 'Vault over 6 meters in pole vault',
    type: 'distance',
    target: 6,
    icon: 'ðŸŒŸ',
    rarity: 'platinum'
  },
  
  // Triple Jump achievements
  {
    id: 'tj-10m',
    title: 'Triple Jump Starter',
    description: 'Jump over 10 meters in triple jump',
    type: 'distance',
    target: 10,
    icon: 'ðŸ¦˜',
    rarity: 'bronze'
  },
  {
    id: 'tj-12m',
    title: 'Triple Jump Competitor',
    description: 'Jump over 12 meters in triple jump',
    type: 'distance',
    target: 12,
    icon: 'ðŸ’¨',
    rarity: 'silver'
  },
  {
    id: 'tj-14m',
    title: 'Triple Jump Elite',
    description: 'Jump over 14 meters in triple jump',
    type: 'distance',
    target: 14,
    icon: 'âš¡',
    rarity: 'gold'
  },
  {
    id: 'tj-16m',
    title: 'Triple Jump World Class',
    description: 'Jump over 16 meters in triple jump',
    type: 'distance',
    target: 16,
    icon: 'ðŸ‘‘',
    rarity: 'platinum'
  },
  
  // Shot Put achievements
  {
    id: 'sp-8m',
    title: 'Shot Put Beginner',
    description: 'Throw shot put over 8 meters',
    type: 'distance',
    target: 8,
    icon: 'âš½',
    rarity: 'bronze'
  },
  {
    id: 'sp-12m',
    title: 'Shot Put Competitor',
    description: 'Throw shot put over 12 meters',
    type: 'distance',
    target: 12,
    icon: 'ðŸ’ª',
    rarity: 'silver'
  },
  {
    id: 'sp-16m',
    title: 'Shot Put Elite',
    description: 'Throw shot put over 16 meters',
    type: 'distance',
    target: 16,
    icon: 'ðŸ”¥',
    rarity: 'gold'
  },
  {
    id: 'sp-20m',
    title: 'Shot Put World Class',
    description: 'Throw shot put over 20 meters',
    type: 'distance',
    target: 20,
    icon: 'ðŸŒŸ',
    rarity: 'platinum'
  },
  
  // Discus achievements
  {
    id: 'dt-25m',
    title: 'Discus Beginner',
    description: 'Throw discus over 25 meters',
    type: 'distance',
    target: 25,
    icon: 'ðŸ¥',
    rarity: 'bronze'
  },
  {
    id: 'dt-35m',
    title: 'Discus Competitor',
    description: 'Throw discus over 35 meters',
    type: 'distance',
    target: 35,
    icon: 'ðŸ’¨',
    rarity: 'silver'
  },
  {
    id: 'dt-45m',
    title: 'Discus Elite',
    description: 'Throw discus over 45 meters',
    type: 'distance',
    target: 45,
    icon: 'âš¡',
    rarity: 'gold'
  },
  {
    id: 'dt-60m',
    title: 'Discus World Class',
    description: 'Throw discus over 60 meters',
    type: 'distance',
    target: 60,
    icon: 'ðŸ‘‘',
    rarity: 'platinum'
  },
  
  // Hammer achievements
  {
    id: 'ht-30m',
    title: 'Hammer Beginner',
    description: 'Throw hammer over 30 meters',
    type: 'distance',
    target: 30,
    icon: 'ðŸ”¨',
    rarity: 'bronze'
  },
  {
    id: 'ht-45m',
    title: 'Hammer Competitor',
    description: 'Throw hammer over 45 meters',
    type: 'distance',
    target: 45,
    icon: 'ðŸ’ª',
    rarity: 'silver'
  },
  {
    id: 'ht-60m',
    title: 'Hammer Elite',
    description: 'Throw hammer over 60 meters',
    type: 'distance',
    target: 60,
    icon: 'ðŸ”¥',
    rarity: 'gold'
  },
  {
    id: 'ht-75m',
    title: 'Hammer World Class',
    description: 'Throw hammer over 75 meters',
    type: 'distance',
    target: 75,
    icon: 'ðŸŒŸ',
    rarity: 'platinum'
  },
  
  // Javelin achievements
  {
    id: 'jt-30m',
    title: 'Javelin Beginner',
    description: 'Throw javelin over 30 meters',
    type: 'distance',
    target: 30,
    icon: 'ðŸ¹',
    rarity: 'bronze'
  },
  {
    id: 'jt-45m',
    title: 'Javelin Competitor',
    description: 'Throw javelin over 45 meters',
    type: 'distance',
    target: 45,
    icon: 'ðŸ’¨',
    rarity: 'silver'
  },
  {
    id: 'jt-60m',
    title: 'Javelin Elite',
    description: 'Throw javelin over 60 meters',
    type: 'distance',
    target: 60,
    icon: 'âš¡',
    rarity: 'gold'
  },
  {
    id: 'jt-80m',
    title: 'Javelin World Class',
    description: 'Throw javelin over 80 meters',
    type: 'distance',
    target: 80,
    icon: 'ðŸ‘‘',
    rarity: 'platinum'
  }
];

export function checkAchievements(
  achievements: Achievement[],
  totalXP: number,
  workoutCount: number,
  records: any[]
): Achievement[] {
  return achievements.map(achievement => {
    if (achievement.isUnlocked) return achievement;
    
    let currentProgress = 0;
    let shouldUnlock = false;
    
    switch (achievement.type) {
      case 'xp':
        currentProgress = totalXP;
        shouldUnlock = totalXP >= achievement.target;
        break;
        
      case 'workout_count':
        currentProgress = workoutCount;
        shouldUnlock = workoutCount >= achievement.target;
        break;
        
      case 'time':
        // Extract event type from achievement ID
        const eventMatch = achievement.id.match(/-(\w+)$/);
        if (eventMatch) {
          let eventType = eventMatch[1];
          
          // Handle special cases for event type mapping
          if (eventType === '110h') eventType = '110m-hurdles';
          if (eventType === '400h') eventType = '400m-hurdles';
          
          const bestRecord = records
            .filter(r => r.eventType === eventType)
            .sort((a, b) => a.value - b.value)[0];
          
          if (bestRecord) {
            currentProgress = bestRecord.value;
            shouldUnlock = bestRecord.value <= achievement.target;
          }
        }
        break;
        
      case 'distance':
        // Extract event type from achievement ID
        const distanceEventMatch = achievement.id.match(/^(\w+)-/);
        if (distanceEventMatch) {
          let eventType = distanceEventMatch[1];
          
          // Map achievement prefixes to event types
          const eventTypeMap: Record<string, string> = {
            'lj': 'long-jump',
            'hj': 'high-jump',
            'pv': 'pole-vault',
            'tj': 'triple-jump',
            'sp': 'shot-put',
            'dt': 'discus',
            'ht': 'hammer',
            'jt': 'javelin'
          };
          
          eventType = eventTypeMap[eventType] || eventType;
          
          const bestRecord = records
            .filter(r => r.eventType === eventType)
            .sort((a, b) => b.value - a.value)[0]; // Higher is better for distance/height
          
          if (bestRecord) {
            currentProgress = bestRecord.value;
            shouldUnlock = bestRecord.value >= achievement.target;
          }
        }
        break;
    }
    
    return {
      ...achievement,
      currentProgress,
      isUnlocked: shouldUnlock,
      unlockedDate: shouldUnlock ? new Date().toISOString() : undefined
    };
  });
}